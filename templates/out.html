<html>
<head><title>Chat Hub</title>


</head>

<body>
    <div id = "avatar" style="height:20px;background-color:">


    </div>
    <h1>ENTER SOME TEXT.</h1>
    <h1>Welcome {{name}}</h1>
    <p id="link_opener"></p>
    <p id="aut_type"></p>
    <p id='join'></p>
    <h1>{{room}}</h1>
    <form method="post" action="#" id="dispform">
        <label>TEXT</label>
        <input type="text" id="disp" onkeypress ='typeauto()' onkeyup='type_auto_up()'></input>
        <input type="submit" value="Submit"></input>
    </form>
    <div id="msg-list"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   
    <script src="{{url_for('static',filename = 'avatar.js')}}"></script>
    <link href="{{url_for('static',filename = 'css/bootstrap.min.css')}}" rel="stylesheet">
    <link  href="{{url_for('static',filename='font-awesome-4.5.0/css/font-awesome.min.css')}}" rel="stylesheet" >
   
    <link href='https://fonts.googleapis.com/css?family=Amatic+SC:700|Black+Ops+One' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
<script src="{{url_for('static',filename = 'js/bootstrap.min.js')}}"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">

       
            var url = "http://" + document.domain + ":" + location.port;
            var socket = io.connect(url + "/chat");

            $("#dispform").submit(function(event) {
              console.log($('#disp').val());
                socket.emit('disp', {'disp': $("#disp").val()});
                $('#disp').val('');
                return false;
            });
            socket.on('disp', function(msg) {
                $("#msg-list").prepend('<h3>'+msg.nam+ msg.disp +'</h3>');
            });
            
            var timer;
            function type_auto_up(){

               clearTimeout(timer);
               timer=setTimeout(  
                function ()
               {
                        socket.emit('type',{'press':'f'});
                        return false;
                  },1000);
              }
          function typeauto()
            {
                socket.emit('type',{'press':'t'});
                    return false;
            }
           
      
            socket.on('atype',function(data){
                if (data.press=='t'){
                    $('#aut_type').html(data.name);
                }
                else
                    {$('#aut_type').html(' ');}

            });


          socket.on('connect', function() {
                socket.emit('joined', {});
            });
            socket.on('status', function(data) {
                var paragraphs = document.getElementById("join");
                var joined = paragraphs.innerHTML
                if (joined.search(data.name)>=0)
                    {}
                 else
                 {
                    $('#join').prepend('<p>'+data.msg+'</p>');
                    }
            });
     
       
    </script>

<!-- <nav class="navbar navbar-default navbar-fixed-bottom" >
    <form method="post" action="#" id="dispform">
      <div class="col-lg-12 col-xs-12">
        <div class="form-group">
            <div class="input-group">
             <input type="text" class="form-control" placeholder="Enter your message..." id="disp" onkeypress ='typeauto()' onkeyup='type_auto_up()'>
            </div>
        </div>
        <div class="form-group">
            <span class="input-group-btn">
            <button class="btn btn-default" type="submit">Go!</button>
            </span>
        </div>
    </div><
    </form> -->
</nav>



</body>
</html>
